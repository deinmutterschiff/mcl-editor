<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>JSON Parsing Test</title>
    <script src="infoParser.js"></script>
  </head>
  <body>
    <script>
        const varFilePath = 'variable_and_tables_info/variables.json';
        let mylangVariables;
  
        const tabFilePath = 'variable_and_tables_info/tables.json';
        let mylangTables;
  
        //TODO find out how to better handle the loading than with these promises
        const varPromise = loadData(varFilePath);
        const tabPromise = loadData(tabFilePath);

        // load variables data
        varPromise.then((variablesData) => {
            // save variables to global variable for later use
            window.variablesData = variablesData;
            mylangVariables = variablesData;
            mylangVariables = Object.entries(mylangVariables);
            mylangVariables = mylangVariables.map((variables) => variables[1])
        });

        // load tables data
        tabPromise.then((tablesData) => {
            // save tables to global variable for later use
            window.tablesData = tablesData;
            mylangTables = tablesData;
            mylangTables = Object.entries(mylangTables);
            mylangTables = mylangTables.map((tables) => tables[1])
    
            mylangTables = [].concat(...mylangTables)
        
        });

        Promise.all([varPromise, tabPromise]).then(() => {
            console.log(mylangVariables);
            console.log(mylangTables);
        })
    </script>
  </body>
</html>
